# 錯誤捕手

## 錯誤邊界組件

```
// 因為 Functional Component的週期沒有 compoentDidCatch
// 所以要寫成 Class Component
import { Component } from 'react';

class ErrorBoundary extends Component {

    constructor(props) {
        super(props);
        this.state = { hasError: false };
        this.stateReset = this.stateReset.bind(this);
    }
    //更新狀態去渲染錯誤時的介面
    static getDerivedStateFromError(error) {
        return { hasError: true };
    }

    componentDidCatch(error, info) {
        console.error('componentDidCatch', error);
        this.stateReset();
    }

    stateReset() {
        if (this.state.hasError) {
            this.state.hasError = false;
        }
    }

    render() {
        if (this.state.hasError) {
          return (
            <Button onClick={()=>this.stateReset()}>
                Something Error !
            </Button>
          )
        }

        return this.props.children;
    }
}

export default ErrorBoundary;

```

## 使用方法

```
<ErrorBoundary>
  <App />
</ErrorBoundary>

```
